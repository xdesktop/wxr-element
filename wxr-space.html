<link rel="import" href="./polymerImport.html">

<dom-module id="wxr-space">
	<template>
		<style>
			wxr-space {
				--wxr-transform: var(--wxr-transform);
			}
		</style>
	</template>

	<script>
		'use strict';

		class WXRSpace extends WXRElement {
			constructor() {
				super();
			}

			static get is() {
				return "wxr-space";
			}

			static get properties() {
				return {
					src: {type: String},
					enable: Boolean,
					disabled: Boolean
				};
			}

			connectedCallback() {
				super.connectedCallback();

				let webGLAugmentation = new THREE.Group();
				let css3DAugmentation = new THREE.Group();

				this.addWebGLObject3D(webGLAugmentation);
				this.addCSS3DObject3D(css3DAugmentation);

				this.addEventListener(WXREvent.SPACE_CHECKOUT, this.onCheckout);
				this.addEventListener(WXREvent.SPACE_CHECKIN, this.onCheckIn);
			}

			onCheckIn(event) {
				this.removeAttribute("disabled");
				this.setAttribute("enable", "");
				this.parentElement.loadSpace(this);

				WXR.log(WXRSpace.is, "enter " + this.src);
			}

			onCheckout(event) {
				this.removeAttribute("enable");
				this.setAttribute("disabled", "");
				this.parentElement.unloadSpace(this);

				WXR.log(WXRSpace.is, "exit " + this.src);
			}
		}

		customElements.define(WXRSpace.is, WXRSpace);

	</script>
</dom-module>